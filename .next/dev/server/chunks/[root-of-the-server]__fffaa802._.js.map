{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/React%20Projects/NEXTJS%20PROJECTS/OZONE/ozone-water-1/lib/db.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst connectionDb = async () => {\r\n  if (mongoose.connections[0].readyState) {\r\n    console.log(\"MongoDB already connected\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await mongoose.connect(process.env.MONGO_URI); \r\n    console.log(\"MongoDB connected successfully\");\r\n  } catch (err) {\r\n    console.error(\"MongoDB connection failed:\", err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport default connectionDb;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,eAAe;IACnB,IAAI,oHAAQ,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE;QACtC,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,IAAI;QACF,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS;QAC5C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF;uCAEe"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///E:/React%20Projects/NEXTJS%20PROJECTS/OZONE/ozone-water-1/models/Transaction.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst transactionSchema = new mongoose.Schema({\r\n    doBy:{\r\n        type: String,\r\n        required: true,\r\n    },\r\n    amount:{\r\n        type: Number,\r\n        required: true,\r\n        min: 0,\r\n    },\r\n    purpose :{\r\n        type: String,\r\n        required: true,\r\n\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n    },     \r\n})\r\nconst Transaction = mongoose.models.Transaction || mongoose.model(\"Transaction\", transactionSchema);\r\n\r\nexport default Transaction;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,oBAAoB,IAAI,oHAAQ,CAAC,MAAM,CAAC;IAC1C,MAAK;QACD,MAAM;QACN,UAAU;IACd;IACA,QAAO;QACH,MAAM;QACN,UAAU;QACV,KAAK;IACT;IACA,SAAS;QACL,MAAM;QACN,UAAU;IAEd;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;IACrB;AACJ;AACA,MAAM,cAAc,oHAAQ,CAAC,MAAM,CAAC,WAAW,IAAI,oHAAQ,CAAC,KAAK,CAAC,eAAe;uCAElE"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///E:/React%20Projects/NEXTJS%20PROJECTS/OZONE/ozone-water-1/src/app/api/transaction/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport connectDB from \"../../../../lib/db\";\r\nimport Transaction from \"../../../../models/Transaction\";\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    await connectDB();\r\n    const { amount, doBy, purpose } = await request.json();\r\n    if (!amount || !doBy || !purpose) {\r\n      return NextResponse.json(\r\n        { message: \"All fields are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    const newTransaction = new Transaction({\r\n      amount,\r\n      doBy,\r\n        purpose,\r\n    });\r\n    await newTransaction.save();\r\n    return NextResponse.json({ message: \"Transaction recorded successfully.\", data: newTransaction, success: true }, { status: 201 });\r\n  } catch (error) {\r\n    return NextResponse.json({ message: \"Failed to record transaction.\", error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function GET(request) {\r\n    try {\r\n        await connectDB();\r\n        const transactions = await Transaction.find().sort({ createdAt: -1 });\r\n        return NextResponse.json({ success : true, message: \"Transactions fetched successfully\", data:transactions }, { status: 200 });\r\n    } catch (error) {\r\n        console.error(\"Error fetching transactions:\", error);\r\n        return NextResponse.json(\r\n            { success: false, message: \"Internal Server Error\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,IAAA,sJAAS;QACf,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QACpD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS;YAChC,OAAO,gLAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA0B,GACrC;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,iBAAiB,IAAI,kKAAW,CAAC;YACrC;YACA;YACE;QACJ;QACA,MAAM,eAAe,IAAI;QACzB,OAAO,gLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAsC,MAAM;YAAgB,SAAS;QAAK,GAAG;YAAE,QAAQ;QAAI;IACjI,EAAE,OAAO,OAAO;QACd,OAAO,gLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAiC,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC7G;AACF;AAEO,eAAe,IAAI,OAAO;IAC7B,IAAI;QACA,MAAM,IAAA,sJAAS;QACf,MAAM,eAAe,MAAM,kKAAW,CAAC,IAAI,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QACnE,OAAO,gLAAY,CAAC,IAAI,CAAC;YAAE,SAAU;YAAM,SAAS;YAAqC,MAAK;QAAa,GAAG;YAAE,QAAQ;QAAI;IAChI,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gLAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,SAAS;QAAwB,GACnD;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}